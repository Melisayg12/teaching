<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // https://www.motiontricks.com/creating-dynamic-svg-elements-with-javascript/
        // https://www.w3.org/Graphics/SVG/WG/wiki/Simple_SVG_API
        let group1, group2;
        var svgNS = "http://www.w3.org/2000/svg";  
        function getRndInteger(min, max) {
            return Math.floor(Math.random() * (max - min) ) + min;
        }
        function createRndCircle(){
            let cx = getRndInteger(0,800);
            let cy = getRndInteger(0,600);
            let radio = getRndInteger(40,200);
            let color = `rgb(${getRndInteger(0,255)},${getRndInteger(0,255)},${getRndInteger(0,255)})`
            /*return {
                'cx':cx,
                'cy':cy,
                'r':radio,
                'fill': color,
                'stroke': color
            }*/
            let rndCircle = document.createElementNS(svgNS,"circle");
            rndCircle.setAttributeNS(null,"cx",cx);
            rndCircle.setAttributeNS(null,"cy",cy);
            rndCircle.setAttributeNS(null,"r",radio);
            rndCircle.setAttributeNS(null,"fill",color);
            rndCircle.setAttributeNS(null,"stroke",color);
            return rndCircle;
        }
        
        function loadElements(){
            group1 = dronePath = document.createElementNS(svgNS,"g");
            group2 = dronePath = document.createElementNS(svgNS,"g");
            const g = document.createElement("g");

            //var g = document.documentElement.createChild( "g" );
            //var g = document.getElementById("svgContainer").createChild( "g" );
            for( i = 0; i < 10 ; i++)
            {
                group1.appendChild(createRndCircle())
                //document.getElementById("svgContainer").appendChild(createRndCircle());
            }
            document.getElementById("svgContainer").appendChild(group1);
        }

        function switchVisibleCircles(){
            if (group1.style.display === "none"){
                group1.style.display = "block";
            } else {
                group1.style.display = "none"
            }
        }

        function getCoors(evt){
            console.log(evt);
            let xy = translateXY(evt.x,evt.y)
            let x = xy[0];
            let y = xy[1];

            let rndCircle = document.createElementNS(svgNS,"circle");
            rndCircle.setAttributeNS(null,"cx",x);
            rndCircle.setAttributeNS(null,"cy",y);
            rndCircle.setAttributeNS(null,"r",5);
            rndCircle.setAttributeNS(null,"fill","#000000");
            rndCircle.setAttributeNS(null,"stroke","#000000");
            document.getElementById("svgContainer").appendChild(rndCircle);

        }
        function translateXY(x,y){
            svgArea = document.getElementById('svgContainer');
            let vbox = svgArea.getAttribute('viewBox');
            vbox = vbox.split(" ");
            vbox = vbox.map(e => parseInt(e));
            let newY = (parseFloat(vbox[3])/parseFloat(svgArea.getAttribute('height'))) * y
            let newX = (parseFloat(vbox[2])/parseFloat(svgArea.getAttribute('width'))) * x
            newX = newX + vbox[0]
            newY = newY + vbox[1]
            let xt = [newX, newY];
            return xt;
        }
        function changeViewBox(SVGWidth,  SVGHeight){
            //let vbox = `0 0 ${SVGWidth} ${SVGHeight}`;
            let vbox = "0 0 " + parseInt(SVGWidth) + " " + parseInt(SVGHeight) ;
            svgArea = document.getElementById('svgContainer');
            svgArea.setAttribute("viewBox",vbox);
        }
    </script>
</head>
<body>
    <svg width="800" height="600" id="svgContainer" onclick="getCoors(evt)">
        
    </svg>
    <input type="button" onclick="switchVisibleCircles()" value="Hide/show circles">
    <input type="button" value="Change View Box" onclick="changeViewBox(1600, 1200)">
</body>
</html>